window.__require=function t(e,i,o){function s(c,n){if(!i[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!n&&h)return h(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}}var p=i[c]={exports:{}};e[c][0].call(p.exports,function(t){return s(e[c][1][t]||t)},p,p.exports,t,e,i,o)}return i[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)s(o[c]);return s}({main:[function(t,e,i){"use strict";cc._RF.push(e,"0e77dWXO95ILZS4FQDUmRpT","main"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,r=o.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e.star=null,e.score_txt=null,e.score_anim=null,e.readme=null,e.gameover=null,e.btn_play=null,e.ground=null,e.score_audio=null,e.jump_audio=null,e.jumpHeight=180,e.jumpDuration=.3,e.squashDuration=.1,e.maxMoveSpeed=550,e.speed_x=0,e.acc_dir=0,e.accel=450,e.score=0,e.min_duration=2,e.max_duration=4,e}return __extends(e,t),e.prototype.onLoad=function(){this.player.active=!1,this.star.active=!1,this.gameover.active=!1,this.score_anim.node.active=!1,this.setScore(0),this.btn_play.on("click",this.onStartPlay,this)},e.prototype.update=function(t){-1==this.acc_dir?this.speed_x-=this.accel*t:1==this.acc_dir?this.speed_x+=this.accel*t:this.acc_dir&&(this.speed_x=100),Math.abs(this.speed_x)>this.maxMoveSpeed&&(this.speed_x=this.maxMoveSpeed*this.speed_x/Math.abs(this.speed_x)),this.player.x+=this.speed_x*t,this.player.x>this.node.width/2?(this.player.x=this.node.width/2,this.speed_x=0):this.player.x<-this.node.width/2&&(this.player.x=-this.node.width/2,this.speed_x=0),this.player.getBoundingBox().contains(this.star.position)&&this.onPickStar()},e.prototype.onStartPlay=function(){this.readme.active=!1,this.gameover.active=!1,this.btn_play.active=!1,this.player.active=!0,this.star.active=!0,this.enabled=!0,this.starReinit(),this.playerStartMove(),this.setScore(0),this.node.on("touchstart",this.onTouchBegin,this),this.node.on("touchend",this.onTouchEnd,this)},e.prototype.onGameOver=function(){this.enabled=!1,this.gameover.active=!0,this.btn_play.active=!0,this.player.stopAllActions(),this.star.stopAllActions(),this.node.off("touchstart",this.onTouchBegin,this),this.node.off("touchend",this.onTouchEnd,this)},e.prototype.onPickStar=function(){cc.audioEngine.playEffect(this.score_audio,!1),this.score_anim.node.active=!0,this.score_anim.node.setPosition(this.star.position),this.score_anim.play(),this.setScore(this.score+1),this.starReinit()},e.prototype.onTouchBegin=function(t){this.node.convertToNodeSpaceAR(t.getLocation()).x>=0?this.acc_dir=1:this.acc_dir=-1},e.prototype.onTouchEnd=function(t){this.acc_dir=0},e.prototype.playerStartMove=function(){this.acc_dir=0,this.speed_x=0,this.player.x=0,this.player.y=this.ground.y+this.ground.height/2,this.player.runAction(cc.sequence(cc.scaleTo(this.squashDuration,1,.6),cc.scaleTo(this.squashDuration,1,1.2),cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),cc.scaleTo(this.squashDuration,1,1),cc.moveBy(this.jumpDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionIn()),cc.callFunc(function(){cc.audioEngine.playEffect(this.jump_audio,!1)},this)).repeatForever())},e.prototype.starReinit=function(){this.star.stopAllActions(),this.star.opacity=255,this.starSetNewPosition(),this.star.runAction(cc.sequence(cc.fadeOut(this.getStarDuration()),cc.callFunc(this.onGameOver,this)))},e.prototype.starSetNewPosition=function(){for(var t=this.star.x,e=this.ground.y+this.ground.height/2+Math.random()*this.jumpHeight+50;Math.abs(t-this.star.x)<100;)t=(Math.random()-.5)*this.node.width;this.star.x=t,this.star.y=e},e.prototype.getStarDuration=function(){return this.min_duration+Math.random()*(this.max_duration-this.min_duration)},e.prototype.setScore=function(t){this.score=t,this.score_txt.string="Score: "+this.score},__decorate([r(cc.Node)],e.prototype,"player",void 0),__decorate([r(cc.Node)],e.prototype,"star",void 0),__decorate([r(cc.Label)],e.prototype,"score_txt",void 0),__decorate([r(cc.Animation)],e.prototype,"score_anim",void 0),__decorate([r(cc.Node)],e.prototype,"readme",void 0),__decorate([r(cc.Node)],e.prototype,"gameover",void 0),__decorate([r(cc.Node)],e.prototype,"btn_play",void 0),__decorate([r(cc.Node)],e.prototype,"ground",void 0),__decorate([r({type:cc.AudioClip})],e.prototype,"score_audio",void 0),__decorate([r({type:cc.AudioClip})],e.prototype,"jump_audio",void 0),e=__decorate([s],e)}(cc.Component);i.default=c,cc._RF.pop()},{}]},{},["main"]);